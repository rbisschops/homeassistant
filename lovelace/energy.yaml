## Lovelace-UI file for Home Assistant, Firstfloor view
## Type: Home Assistant yaml file
## Date added: 2019-07-12
## Author: R.Bisschops
##
## overlays for doors and other elements need to be on top in the code, otherwise
## the other controlable elements are not accessible anymore in the fontend!!

title: Energie
panel: true
cards:
  - type: picture-elements
    image: /local/floorplans/energy.png
    elements:
      ##-----------------------------------------------------------------------------------------------
      ## House states used on the floor plan - no control
      ##-----------------------------------------------------------------------------------------------
      ## House state
      - type: image
        title: null
        entity: input_select.mode_house_state
        tap_action:
          action: none
        image: /local/custom_icons/card-house-unknown-on.png
        state_image:
          'Weg': /local/custom_icons/card-house-away-on.png
          'Slaapt': /local/custom_icons/card-house-sleep-on.png
          'Wakker': /local/custom_icons/card-house-wake-on.png
          'Vakantie': /local/custom_icons/card-house-vacation-on.png
        style:
          top: 10%
          left: 18%
          position: absolute
          transform: translate(0%, -50%)
          width: 8%

      ##-----------------------------------------------------------------------------------------------
      ## Energy elements used on the floor plan
      ##-----------------------------------------------------------------------------------------------
      ## Outdoor temperature (buienradar)
      # - type: custom:text-element
      #   text: "Condities buiten:"
      #   style:
      #     top: 80%
      #     left: 19%
      #     font-size: 1.0vw
      #     font-weight: 'bold'
      #     transform: translate(0,0)
      ## House energy usage current day (DSMR Reader)
      - type: state-label
        entity: sensor.utilities_day_consumption_electricity_day
        prefix: ''
        style:
          top: 59%
          left: 56.5%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(-50,0)
      ## House energy usage now (DSMR Reader)
      - type: state-label
        entity: sensor.utilities_consumption_electricity_now
        prefix: ''
        style:
          top: 64%
          left: 56.5%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(-50,0)

      ## House energy usage from grid current day (DSMR Reader)
      - type: state-label
        entity: sensor.dsmr_day_consumption_electricity_merged
        prefix: ''
        style:
          top: 71%
          left: 77%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(0,0)
      ## House energy usage from grid now (DSMR Reader)
      - type: state-label
        entity: sensor.dsmr_electricity_currently_delivered_watt
        prefix: ''
        style:
          top: 76%
          left: 77%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(0,0)

      ## House energy returned to grid current day (DSMR Reader)
      - type: state-label
        entity: sensor.dsmr_day_consumption_electricity_returned_merged
        prefix: ''
        style:
          top: 59%
          left: 77%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(0,0)
      ## House energy returned to grid now (DSMR Reader)
      - type: state-label
        entity: sensor.dsmr_electricity_currently_returned_watt
        prefix: ''
        style:
          top: 64%
          left: 77%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(0,0)

      ## House energy production PV current day
      - type: state-label
        entity: sensor.envoy_reading_electricity_generated_today
        prefix: ''
        style:
          top: 30%
          left: 38%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(-50,0)
      ## House energy production PV now
      - type: state-label
        entity: sensor.envoy_current_energy_production
        prefix: ''
        style:
          top: 35%
          left: 38%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(-50,0)

      ## House gas usage current day (DSMR Reader)
      - type: state-label
        entity: sensor.dsmr_day_consumption_gas
        prefix: ''
        style:
          top: 71%
          left: 30%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(0,0)
      ## House water usage current day (MySensors/Domoticz)
      - type: state-label
        entity: sensor.utilities_water_usage
        prefix: ''
        style:
          top: 64%
          left: 30%
          font-size: 1.0vw
          font-weight: 'bold'
          transform: translate(0,0)
          
      ##-----------------------------------------------------------------------------------------------
      ## Controlable elements used on the floor plan - left panel control elements
      ##-----------------------------------------------------------------------------------------------
      ## Conditional, visible when house is in "Wakker" mode
      - type: conditional
        conditions:
          - entity: 'input_select.mode_house_state'
            state: 'Wakker'
        elements:
          ## Bed time scene control
          - type: image
            entity: input_boolean.scene_bed_time
            tap_action:
              action: toggle
            image: /local/custom_icons/bed_time_144_off.png
            state_image:
              'on': /local/custom_icons/bed_time_144_on.png
              'off': /local/custom_icons/bed_time_144_off.png
            style:
              top: 8%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%
          ## Leaving scene control
          - type: image
            entity: input_boolean.scene_leaving
            tap_action:
              action: toggle
            image: /local/custom_icons/leaving_144_off.png
            state_image:
              'on': /local/custom_icons/leaving_144_on.png
              'off': /local/custom_icons/leaving_144_off.png
            style:
              top: 19%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%
          ## Kerst mode control
          - type: image
            entity: input_boolean.mode_christmas
            tap_action:
              action: toggle
            image: /local/custom_icons/christmas_144_off.png
            state_image:
              'on': /local/custom_icons/christmas_144_on.png
              'off': /local/custom_icons/christmas_144_off.png
            style:
              top: 30%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%
          ## Holiday mode control
          - type: image
            entity: input_boolean.mode_holiday
            tap_action:
              action: toggle
            image: /local/custom_icons/holiday_144_off.png
            state_image:
              'on': /local/custom_icons/holiday_144_on.png
              'off': /local/custom_icons/holiday_144_off.png
            style:
              top: 41%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9% 
          ## Recording mode control
          - type: image
            entity: input_boolean.media_recording_mode
            tap_action:
              action: toggle
            image: /local/custom_icons/recorder_mode_144_off.png
            state_image:
              'on': /local/custom_icons/recorder_mode_144_on.png
              'off': /local/custom_icons/recorder_mode_144_off.png
            style:
              top: 52%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%

       ## Conditional, visible when house is in "Slaapt" mode
      - type: conditional
        conditions:
          - entity: 'input_select.mode_house_state'
            state: 'Slaapt'
        elements:
          ## Wake-up scene control
          - type: image
            entity: input_boolean.scene_wakeup
            tap_action:
              action: toggle
            image: /local/custom_icons/wakeup_144_off.png
            state_image:
              'on': /local/custom_icons/wakeup_144_on.png
              'off': /local/custom_icons/wakeup_144_off.png
            style:
              top: 8%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%
          ## Kerst mode control
          - type: image
            entity: input_boolean.mode_christmas
            tap_action:
              action: toggle
            image: /local/custom_icons/christmas_144_off.png
            state_image:
              'on': /local/custom_icons/christmas_144_on.png
              'off': /local/custom_icons/christmas_144_off.png
            style:
              top: 19%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%
          ## Holiday mode control
          - type: image
            entity: input_boolean.mode_holiday
            tap_action:
              action: toggle
            image: /local/custom_icons/holiday_144_off.png
            state_image:
              'on': /local/custom_icons/holiday_144_on.png
              'off': /local/custom_icons/holiday_144_off.png
            style:
              top: 30%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9% 
          ## Recording mode control
          - type: image
            entity: input_boolean.media_recording_mode
            tap_action:
              action: toggle
            image: /local/custom_icons/recorder_mode_144_off.png
            state_image:
              'on': /local/custom_icons/recorder_mode_144_on.png
              'off': /local/custom_icons/recorder_mode_144_off.png
            style:
              top: 41%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%

      ## Conditional, visible when house is in "Weg" mode
      - type: conditional
        conditions:
          - entity: 'input_select.mode_house_state'
            state: 'Weg'
        elements:
          ## Wake up mode control
          - type: image
            entity: input_boolean.scene_wakeup
            tap_action:
              action: toggle
            image: /local/custom_icons/arriving_144_off.png
            state_image:
              'on': /local/custom_icons/arriving_144_on.png
              'off': /local/custom_icons/arriving_144_off.png
            style:
              top: 8%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%
           ## Kerst mode control
          - type: image
            entity: input_boolean.mode_christmas
            tap_action:
              action: toggle
            image: /local/custom_icons/christmas_144_off.png
            state_image:
              'on': /local/custom_icons/christmas_144_on.png
              'off': /local/custom_icons/christmas_144_off.png
            style:
              top: 19%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%
          ## Holiday mode control
          - type: image
            entity: input_boolean.mode_holiday
            tap_action:
              action: toggle
            image: /local/custom_icons/holiday_144_off.png
            state_image:
              'on': /local/custom_icons/holiday_144_on.png
              'off': /local/custom_icons/holiday_144_off.png
            style:
              top: 30%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9% 
          ## Recording mode control
          - type: image
            entity: input_boolean.media_recording_mode
            tap_action:
              action: toggle
            image: /local/custom_icons/recorder_mode_144_off.png
            state_image:
              'on': /local/custom_icons/recorder_mode_144_on.png
              'off': /local/custom_icons/recorder_mode_144_off.png
            style:
              top: 41%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%

      ## Alarm reset control - conditional based on alarm state
      - type: conditional
        conditions:
          - entity: 'input_boolean.alarm_generic_alarm'
            state: 'on'
        elements:
          - type: image
            entity: input_boolean.alarm_reset_alarm
            tap_action:
              action: toggle
            image: /local/custom_icons/reset_144_off.png
            state_image:
              'on': /local/custom_icons/reset_144_off.png
              'off': /local/custom_icons/reset_144_on.png 
            style:
              top: 74%
              left: 3%
              position: absolute
              transform: translate(0%, -50%)
              width: 9%

