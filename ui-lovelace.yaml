## Lovelace-UI file for Home Assistant
## Type: Home Assistant yaml file
## Date added: 2019-12-14
## Author: R.Bisschops

###############################################################################
##  Custom compact header settings
##  https://github.com/maykar/compact-custom-header
###############################################################################
cch:
  header: hide
  menu: show
  options: show
  voice: show
  notifications: clock
  clock_format: '24'
  clock_date: true
  date_locale: nl-NL
  disable: false

###############################################################################
##  Custom button card templates
##  https://github.com/custom-cards/button-card
###############################################################################
button_card_templates:
  media_button_large:
    styles:
      card:
        - border-radius: 10px
        - color: rgb(84, 84, 84)
      icon:
        - color: rgb(84, 84, 84)
      name:
        - font-size: 1.2em
        - font-weight: normal
  media_button_small_icon:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(84, 84, 84)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      icon:
        - color: rgb(84, 84, 84)
  media_button_small_icon_red:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(84, 84, 84)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      icon:
        - color: rgb(140, 0, 0)
  media_button_small_icon_yellow:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(84, 84, 84)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      icon:
        - color: rgb(255, 255, 54)
  media_button_small_icon_green:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(84, 84, 84)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      icon:
        - color: rgb(16, 160, 0)
  media_button_small_icon_blue:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(84, 84, 84)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      icon:
        - color: rgb(0, 0, 255)
  media_button_small_text_1:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(237, 125, 29)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      name:
        - font-size: 2.0em
        - font-weight: normal
  media_button_small_text_2:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(84, 84, 84)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      name:
        - font-size: 1.5em
        - font-weight: bold
  media_button_small_text_3:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(84, 84, 84)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      name:
        - font-size: 1.2em
        - font-weight: bold
  media_button_small_text_3_red:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(140, 0, 0)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      name:
        - font-size: 1.2em
        - font-weight: bold
  media_button_small_text_3_yellow:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(255, 255, 54)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      name:
        - font-size: 1.2em
        - font-weight: bold
  media_button_small_text_3_blue:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(0, 0, 255)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      name:
        - font-size: 1.2em
        - font-weight: bold
  media_button_small_text_3_green:
    styles:
      card:
        - border-radius: 5px
        - color: rgb(16, 160, 0)
        - height: 50px
        # - background-color: rgb(84, 84, 84)
      name:
        - font-size: 1.2em
        - font-weight: bold
  stats_button_card_small_icon:
    styles:
      card:
        - height: 70px
      name:
        - font-size: 1.0em
        - font-weight: normal
  light_button_large:
    styles:
      card:
        - border-radius: 10px
        - color: rgb(84, 84, 84)
      icon:
        - color: rgb(84, 84, 84)
      name:
        - font-size: 1.2em
        - font-weight: normal
  ## Style for RAG indicators
  stats_rag_icon:
    styles:
      card:
        - height: 60px
        - padding: 2%
      name:
        - font-size: 0.9em
        - font-weight: normal
        - text-align: left

###############################################################################
##  Settings for Declustering-card
##  https://github.com/custom-cards/decluttering-card
###############################################################################

decluttering_templates:
  custom_markdown_card:
    card:
      type: markdown
      content: >
        ### [[title]]
      style: |
        ha-card {
          background: none;
          box-shadow: 0px 0px;
        }
        ha-markdown.markdown.no-header {
          padding: 0;
        }
  custom_markdown_card_small:
    card:
      type: markdown
      content: >
        [[title]]
      style: |
        ha-card {
          background: none;
          box-shadow: 0px 0px;
          font-size: 0.9em;
          font-weight: bold
        }
        ha-markdown.markdown.no-header {
          padding: 0;
        }
  media_button_large:
    card:
      type: custom:button-card
      template:  media_button_large
      entity: '[[entity]]'
      icon: 'mdi:[[icon]]'
      show_entity_picture: true
      entity_picture: /local/custom_media_icons/[[picture]]
      size: 40%
      show_state: false
      tap_action:
        action: toggle
      name: '[[name]]'
      state:
        - value: 'off'
          styles:
            card:
              - color: rgb(84, 84, 84)
        - value: 'on'
          styles:
            card:
              - color: rgb(237, 125, 29)
            icon:
              - color: rgb(237, 125, 29)
  media_button_small_icon:
    card:
      type: custom:button-card
      template: media_button_small_icon
      icon: 'mdi:[[icon]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_icon_red:
    card:
      type: custom:button-card
      template: media_button_small_icon_red
      icon: 'mdi:[[icon]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_icon_yellow:
    card:
      type: custom:button-card
      template: media_button_small_icon_yellow
      icon: 'mdi:[[icon]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_icon_blue:
    card:
      type: custom:button-card
      template: media_button_small_icon_blue
      icon: 'mdi:[[icon]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_icon_green:
    card:
      type: custom:button-card
      template: media_button_small_icon_green
      icon: 'mdi:[[icon]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_text_1:
    card:
      type: custom:button-card
      template: media_button_small_text_1
      name: '[[name]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_text_2:
    card:
      type: custom:button-card
      template: media_button_small_text_2
      name: '[[name]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_text_3:
    card:
      type: custom:button-card
      template: media_button_small_text_3
      name: '[[name]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_text_3_red:
    card:
      type: custom:button-card
      template: media_button_small_text_3_red
      name: '[[name]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_text_3_yellow:
    card:
      type: custom:button-card
      template: media_button_small_text_3_yellow
      name: '[[name]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_text_3_green:
    card:
      type: custom:button-card
      template: media_button_small_text_3_green
      name: '[[name]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  media_button_small_text_3_blue:
    card:
      type: custom:button-card
      template: media_button_small_text_3_blue
      name: '[[name]]'
      tap_action:
        action: call-service
        service: remote.send_command
        service_data: 
          entity_id: remote.bisschops
          device: '[[device]]'
          command: '[[command]]'
  stats_critical_small_icon:
    card:
      type: custom:button-card
      entity: 'sensor.network_[[sensor]]'
      template: stats_button_card_small_icon
      name: '[[name]]'
      tap_action:
        action: more-info
      icon: 'mdi:[[icon]]'
      state:
        - value: 'off'
          styles:
            card:
              - color: rgb(216, 0, 0)
            icon:
              - color: rgb(216, 0, 0)
        - value: 'on'
          styles:
            card:
              - color: rgb(56, 150, 56)
            icon:
              - color: rgb(56, 150, 56)
  stats_normal_small_icon:
    card:
      type: custom:button-card
      entity: 'sensor.network_[[sensor]]'
      template: stats_button_card_small_icon
      name: '[[name]]'
      tap_action:
        action: more-info
      icon: 'mdi:[[icon]]'
      state:
        - value: 'off'
          styles:
            card:
              - color: rgb(160, 160, 160)
            icon:
              - color: rgb(160, 160, 160)
        - value: 'on'
          styles:
            card:
              - color: rgb(56, 150, 56)
            icon:
              - color: rgb(56, 150, 56)

  light_button_large:
    card:
      type: custom:button-card
      template:  light_button_large
      entity: '[[entity]]'
      icon: 'mdi:[[icon]]'
      size: 30%
      show_state: false
      tap_action:
        action: toggle
      name: '[[name]]'
      state:
        - value: 'off'
          styles:
            card:
              - color: rgb(84, 84, 84)
        - value: 'on'
          styles:
            card:
              - color: rgb(56, 150, 56)
            icon:
              - color: rgb(56, 150, 56)

  ## RAG (Red-Amber-Green) buttons with RH value
  stats_rag_icon_humidity:
    card:
      type: custom:button-card
      entity: 'sensor.environment_[[sensor]]_humidity'
      icon: >
        [[[
          if (parseFloat(entity.state) < 40) return 'mdi:alpha-l-circle';
          if (parseFloat(entity.state) < 45 && parseFloat(entity.state) >= 40) return 'mdi:alpha-l-circle';
          if (parseFloat(entity.state) >= 45 && parseFloat(entity.state) <= 55) return 'mdi:alpha-n-circle';
          if (parseFloat(entity.state) > 55 && parseFloat(entity.state) <= 60) return 'mdi:alpha-h-circle';
          if (parseFloat(entity.state) > 60) return 'mdi:alpha-h-circle';
          else return 'mdi:alert-circle';
        ]]]
      template: stats_rag_icon
      name: '[[name]]'
      tap_action:
        action: more-info
      styles:
        grid:
          - grid-template-areas: '"i temp" "n n"'
          - grid-template-columns: 1fr 1fr
          - grid-template-rows: 1fr
        img_cell:
          - justify-content: start
          - align-items: start
          - margin: none
        icon:
          - color: >
             [[[
              if (parseFloat(entity.state) < 40) return 'rgb(216, 0, 0)';
              if (parseFloat(entity.state) < 45 && parseFloat(entity.state) >= 40) return 'rgb(244, 180, 0)';
              if (parseFloat(entity.state) >= 45 && parseFloat(entity.state) <= 55) return 'rgb(56, 150, 56)';
              if (parseFloat(entity.state) > 55 && parseFloat(entity.state) <= 60) return 'rgb(244, 180, 0)';
              if (parseFloat(entity.state) > 60) return 'rgb(216, 0, 0)';
              else return 'rgb(224, 224, 224)';
             ]]]
        custom_fields:
          temp:
            - align-self: start
            - justify-self: end
      custom_fields:
        temp: >
          [[[
            if (entity.state == "unknown") return '<ha-icon icon="mdi:water-percent" style="width: 12px; height: 1em;"></ha-icon><span style="font-size: 0.8em;">--</span>';
            else return `<ha-icon icon="mdi:water-percent" style="width: 12px; height: 1em;"></ha-icon><span style="font-size: 0.8em;">${entity.state}%</span>`;
          ]]]

###############################################################################
## Experimental code move or remove after testing
###############################################################################
  stats_rh_rag_icon_test:
    card:
      type: custom:button-card
      entity: 'sensor.environment_[[sensor]]_humidity'
      template: stats_rag_icon
      name: '[[name]]'
      tap_action:
        action: more-info
      icon: 'mdi:[[icon]]'
      layout: icon_name
      styles:
        icon:
          - color: >
             [[[
              if (parseFloat(entity.state) < 40) return 'rgb(216, 0, 0)';
              if (parseFloat(entity.state) < 45 && parseFloat(entity.state) >= 40) return 'rgb(244, 180, 0)';
              if (parseFloat(entity.state) >= 45 && parseFloat(entity.state) <= 55) return 'rgb(56, 150, 56)';
              if (parseFloat(entity.state) > 55 && parseFloat(entity.state) <= 60) return 'rgb(244, 180, 0)';
              if (parseFloat(entity.state) > 60) return 'rgb(216, 0, 0)';
              else return 'rgb(224, 224, 224)';
             ]]]

###############################################################################
##  Main Lovemace settings
###############################################################################
title: Bisschops Mansion
# background: center / cover no-repeat url("/local/background2.jpg") fixed
views:
  - !include lovelace/home.yaml
  - !include lovelace/groundfloor.yaml
  - !include lovelace/firstfloor.yaml
  - !include lovelace/secondfloor.yaml
  - !include lovelace/garden.yaml
  - !include lovelace/mediaplayer.yaml
  - !include lovelace/weather.yaml
  - !include lovelace/utilities.yaml
  - !include lovelace/stats.yaml
  - !include lovelace/things.yaml
  - !include lovelace/settings.yaml
  - !include lovelace/automations.yaml
  - !include lovelace/test.yaml